# ADR-002: Управление секретами и конфигурацией
Дата: 2025-10-20
Статус: Accepted

## Context
Ранее секреты (SECRET_KEY, DB_URL и др.) задавались прямо в коде или коммитились в репозиторий, что приводило к рискам утечки.
Нужно централизовать и обезопасить конфигурацию.

## Decision
- Все параметры читаются из переменных окружения через `Settings` (`app/core/config.py`).
- Реальный `.env` исключён из Git, пример `.env.example` остаётся.
- Секреты передаются через GitHub Secrets или CI/CD.
- Проверки:
  • `gitleaks` — 0 утечек;
  • инициализация `Settings()` без ошибок;
  • ревизия секретов ≥ 1 раз в 90 дней.

## Consequences
**Плюсы:** отсутствие утечек, переносимость окружений, простота деплоя.
**Минусы:** требуется хранилище секретов и ручное создание `.env` у разработчиков.

## Links
- NFR-05 (ротация секретов)
- F2, R4 из Threat Model
- tests/test_security_env.py::test_secret_key_from_env
